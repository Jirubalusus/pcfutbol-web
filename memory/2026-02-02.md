# 2026-02-02 - SesiÃ³n de desarrollo PC FÃºtbol Web

## Bugs arreglados
- **React error #300 en producciÃ³n**: `useCallback` en `WorldMap.jsx` estaba DESPUÃ‰S de un `if (isMobile) return` â€” violaba reglas de hooks. Movido antes del condicional. Solo se manifestaba en mÃ³vil.
- **Mensajes "Fichaje Fallido" descentrados**: `.fail-reason` necesitaba `margin: auto` y `.block-notice` necesitaba `text-align: center` en `TransfersV2.scss`
- **Temporada incorrecta**: MainMenu decÃ­a "2024-2025", cambiado a "2025-2026"

## Pretemporada simplificada
- `seasonManager.js`: 3 opciones 100% aleatorias (sin categorÃ­as prestigio/equilibrada/regional)
- Partidos 1-4 siempre fuera, partido 5 siempre en casa (presentaciÃ³n)
- Sin dificultad, sin ingresos potenciales â€” solo rivales con OVR
- BotÃ³n "Comenzar Temporada" sticky en mÃ³vil

## 4 nuevas ligas aÃ±adidas (Resto del Mundo)
- ğŸ‡ºğŸ‡¸ MLS (20 equipos) â€” `teams-mls.js`
- ğŸ‡¸ğŸ‡¦ Saudi Pro League (18 equipos) â€” `teams-saudi.js`
- ğŸ‡²ğŸ‡½ Liga MX (18 equipos) â€” `teams-ligamx.js`
- ğŸ‡¯ğŸ‡µ J-League (20 equipos) â€” `teams-jleague.js`
- Datos generados por IA, NO scrapeados â€” Pol quiere scrapear Transfermarkt para datos reales
- Integradas en: teamsFirestore.js, TeamSelection.jsx, multiLeagueEngine.js, leagueTiers.js, WorldMap.jsx
- CategorÃ­a "Resto del Mundo" en el selector (globe + mobile list)
- Tiers: Saudi tier 2, Liga MX tier 2, MLS tier 3, J-League tier 3

## Steam - Plan de publicaciÃ³n
- **Pol quiere publicar en Steam** â€” idea seria, no curiosidad
- Steamworks: cuenta creada, esperando validaciÃ³n (2-7 dÃ­as)
- **Estrategia legal**: Ficcionalizar nombres (tipo PES option files)
  - Juego sale con nombres falsos parecidos pero legales
  - Sistema de Editor con modo PÃºblico (revisado) y Privado (libre)
  - "Casualmente" alguien de la comunidad (nosotros) sube un pack pÃºblico con datos reales desde dÃ­a 1
- **Nombre del juego**: brainstorming en curso, favoritos: "The Gaffer", "Dugout", "Touchline" (Pol quiere nombres en inglÃ©s)
- **Todo el juego debe pasar a inglÃ©s** eventualmente
- MigraciÃ³n tÃ©cnica: React â†’ Electron/Tauri, Firebase â†’ SQLite local, Steamworks SDK
- Primero: store page "Coming Soon" para generar wishlists

## RevisiÃ³n de claude-mem
- Pol preguntÃ³ por seguridad de github.com/thedotmack/claude-mem
- Tiene token crypto $CMEM en Solana â€” red flag enorme
- Captura TODO lo que hace Claude Code (hooks en cada lifecycle event)
- Servidor HTTP local sin auth en puerto 37777
- Veredicto: no recomendable por trust issues con el token crypto

## Scraping Transfermarkt completado âœ…
- Script Node.js (`scrape-transfermarkt.js`) con cheerio para parsear HTML
- Datos extraÃ­dos: nombre, posiciÃ³n (mapeada POR/DFC/LTI/etc), edad, valor mercado, nacionalidad (en espaÃ±ol)
- OVR calculado algorÃ­tmicamente desde valor de mercado + edad
- 4 ligas scrapeadas:
  - ğŸ‡ºğŸ‡¸ **MLS**: 30 equipos (era 20, ahora incluye los 30 reales â€” San Diego FC nuevo 2025)
  - ğŸ‡¸ğŸ‡¦ **Saudi Pro League**: 18 equipos (Al-Qadsiah, NEOM SC nuevos)
  - ğŸ‡²ğŸ‡½ **Liga MX**: 18 equipos âœ…
  - ğŸ‡¯ğŸ‡µ **J-League**: 20 equipos (Mito HollyHock, JEF United Chiba, Fagiano Okayama, Shimizu S-Pulse, V-Varen Nagasaki promovidos)
- Total: **86 equipos, ~1968 jugadores** con datos reales
- Metadatos (colores, ciudades, estadios, reputaciÃ³n) preservados de archivos existentes + nuevos equipos aÃ±adidos
- Build pasa âœ…
- Estrellas verificadas: Messi 85, CR7 85, De Paul 79, Riqui Puig 81, ManÃ© 75, Benzema 77

## Nota tÃ©cnica
- Transfermarkt es scraping viable (devuelve datos 2025-26 reales via web_fetch + cheerio)
- Nacionalidades extraÃ­das de `img.flaggenrahmen[title]` en HTML
- SoFIFA bloqueado por Cloudflare
- Scripts de scraping en: `scrape-transfermarkt.js` y `merge-teams.js`
- JSONs raw en: `scraped-{mls,saudi,ligamx,jleague}.json`
