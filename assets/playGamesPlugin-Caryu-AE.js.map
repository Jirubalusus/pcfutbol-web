{"version":3,"file":"playGamesPlugin-Caryu-AE.js","sources":["../../src/services/playGamesPlugin.js"],"sourcesContent":["// Google Play Games Services via @capgo/capacitor-social-login\n// Wraps the social login plugin to provide our PlayGames API\n\nimport { SocialLogin } from '@capgo/capacitor-social-login';\nimport { Capacitor } from '@capacitor/core';\n\nlet initialized = false;\n\nasync function ensureInitialized() {\n  if (initialized) return;\n  if (Capacitor.getPlatform() === 'android') {\n    await SocialLogin.initialize({\n      google: {\n        iOSClientId: '', // not needed for Android\n        webClientId: '664376263748-9s0h5cdt4od2q3eb5gf4eo2kki71vpdn.apps.googleusercontent.com',\n      }\n    });\n    initialized = true;\n  }\n}\n\nexport const PlayGames = {\n  signIn: async () => {\n    try {\n      await ensureInitialized();\n      const result = await SocialLogin.login({\n        provider: 'google',\n        options: {\n          scopes: ['profile', 'email'],\n          gamesSignIn: true,\n        }\n      });\n\n      if (result?.result) {\n        const profile = result.result.profile || {};\n        return {\n          isSignedIn: true,\n          player: {\n            playerId: profile.id || result.result.idToken || 'unknown',\n            displayName: profile.name || profile.displayName || 'Player',\n            iconImageUrl: profile.imageUrl || profile.picture || null,\n            email: profile.email || null,\n          }\n        };\n      }\n      return { isSignedIn: false, player: null };\n    } catch (error) {\n      console.error('PlayGames.signIn error:', error);\n      return { isSignedIn: false, player: null };\n    }\n  },\n\n  signOut: async () => {\n    try {\n      await SocialLogin.logout({ provider: 'google' });\n    } catch (error) {\n      console.error('PlayGames.signOut error:', error);\n    }\n  },\n\n  isSignedIn: async () => {\n    try {\n      const result = await SocialLogin.isLoggedIn({ provider: 'google' });\n      return { isSignedIn: result?.isLoggedIn || false };\n    } catch (error) {\n      return { isSignedIn: false };\n    }\n  },\n\n  getCurrentPlayer: async () => {\n    try {\n      const result = await SocialLogin.getUser({ provider: 'google' });\n      if (result) {\n        return {\n          playerId: result.id || 'unknown',\n          displayName: result.name || 'Player',\n          iconImageUrl: result.picture || null,\n        };\n      }\n      return null;\n    } catch (error) {\n      return null;\n    }\n  },\n\n  showAchievements: async () => { console.log('Achievements not yet implemented'); },\n  showLeaderboards: async () => { console.log('Leaderboards not yet implemented'); },\n  unlockAchievement: async () => { console.log('Achievements not yet implemented'); },\n  submitScore: async () => { console.log('Leaderboards not yet implemented'); },\n};\n\nexport default PlayGames;\n"],"names":["initialized","ensureInitialized","Capacitor","SocialLogin","PlayGames","result","profile","error"],"mappings":"0FAMA,IAAIA,EAAc,GAElB,eAAeC,GAAoB,CAC7BD,GACAE,EAAU,YAAW,IAAO,YAC9B,MAAMC,EAAY,WAAW,CAC3B,OAAQ,CACN,YAAa,GACb,YAAa,0EACrB,CACA,CAAK,EACDH,EAAc,GAElB,CAEY,MAACI,EAAY,CACvB,OAAQ,SAAY,CAClB,GAAI,CACF,MAAMH,EAAiB,EACvB,MAAMI,EAAS,MAAMF,EAAY,MAAM,CACrC,SAAU,SACV,QAAS,CACP,OAAQ,CAAC,UAAW,OAAO,EAC3B,YAAa,EACvB,CACA,CAAO,EAED,GAAIE,GAAQ,OAAQ,CAClB,MAAMC,EAAUD,EAAO,OAAO,SAAW,CAAA,EACzC,MAAO,CACL,WAAY,GACZ,OAAQ,CACN,SAAUC,EAAQ,IAAMD,EAAO,OAAO,SAAW,UACjD,YAAaC,EAAQ,MAAQA,EAAQ,aAAe,SACpD,aAAcA,EAAQ,UAAYA,EAAQ,SAAW,KACrD,MAAOA,EAAQ,OAAS,IACpC,CACA,CACM,CACA,MAAO,CAAE,WAAY,GAAO,OAAQ,IAAI,CAC1C,OAASC,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvC,CAAE,WAAY,GAAO,OAAQ,IAAI,CAC1C,CACF,EAEA,QAAS,SAAY,CACnB,GAAI,CACF,MAAMJ,EAAY,OAAO,CAAE,SAAU,QAAQ,CAAE,CACjD,OAASI,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAEA,WAAY,SAAY,CACtB,GAAI,CAEF,MAAO,CAAE,YADM,MAAMJ,EAAY,WAAW,CAAE,SAAU,SAAU,IACrC,YAAc,EAAK,CAClD,MAAgB,CACd,MAAO,CAAE,WAAY,EAAK,CAC5B,CACF,EAEA,iBAAkB,SAAY,CAC5B,GAAI,CACF,MAAME,EAAS,MAAMF,EAAY,QAAQ,CAAE,SAAU,SAAU,EAC/D,OAAIE,EACK,CACL,SAAUA,EAAO,IAAM,UACvB,YAAaA,EAAO,MAAQ,SAC5B,aAAcA,EAAO,SAAW,IAC1C,EAEa,IACT,MAAgB,CACd,OAAO,IACT,CACF,EAEA,iBAAkB,SAAY,CAAE,QAAQ,IAAI,kCAAkC,CAAG,EACjF,iBAAkB,SAAY,CAAE,QAAQ,IAAI,kCAAkC,CAAG,EACjF,kBAAmB,SAAY,CAAE,QAAQ,IAAI,kCAAkC,CAAG,EAClF,YAAa,SAAY,CAAE,QAAQ,IAAI,kCAAkC,CAAG,CAC9E"}